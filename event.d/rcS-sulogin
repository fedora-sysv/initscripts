# rcS-sulogin - "single-user" runlevel compatibility
#
# This task runs /bin/bash during "single-user" mode,
# then continues to the default runlevel.

start on runlevel S

stop on runlevel

console owner
script
	runlevel --set S >/dev/null || true
	exec /bin/bash
end script
post-stop script
	if [ "$1" = "S" ]; then
		runlevel=$(/bin/awk -F ':' '$3 == "initdefault" { print $2 }' /etc/inittab)
		[ -z "$runlevel" ] && runlevel="3"
		exec telinit $runlevel
	fi
end script
