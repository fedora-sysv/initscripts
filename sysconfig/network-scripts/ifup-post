#!/bin/sh

cd /etc/sysconfig/network-scripts
. network-functions

need_hostname
CONFIG=$1
source_config

DEVICETYPE=`echo $DEVICE | sed "s/[0-9]*$//"`
REALDEVICE=`echo $DEVICE | sed 's/:.*//g'`
if echo $DEVICE | grep -q ':' ; then
    ISALIAS=yes
else
    ISALIAS=no
fi

/etc/sysconfig/network-scripts/ifup-routes ${DEVICE}

if [ "$ISALIAS" = no ] ; then
    /etc/sysconfig/network-scripts/ifup-aliases ${DEVICE}
fi


# don't set hostname on ppp/slip connections
if [ -n "$NEEDHOSTNAME" -a "${DEVICE}" != lo -a "${DEVICETYPE}" != "ppp" -a "${DEVICETYPE}" != "slip" ]; then
    IPADDR=`ifconfig ${DEVICE} | grep 'inet addr' | 
	    awk -F: '{ print $2 } ' | awk '{ print $1 }'`
    eval `/bin/ipcalc --silent --hostname ${IPADDR}` && set_hostname $HOSTNAME
fi

# Notify programs that have requested notification
do_netreport

exit 0
